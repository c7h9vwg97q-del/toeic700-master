<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="ui.css">
  <title>Flashcards</title>
</head>
<body>
  <div class="container">
    <button class="btn-sub" onclick="location.href='index.html'">â† æˆ»ã‚‹</button>
    <div class="card" style="min-height:300px; display:flex; flex-direction:column; justify-content:center;" onclick="toggleCard()">
      <div id="word" class="text-large">...</div>
      <div id="detail" class="hidden" style="margin-top:20px; border-top:1px solid #444; padding-top:20px;">
        <div id="meaning" style="color:cyan; font-size:1.5rem; font-weight:bold;"></div>
        <div id="example" style="font-style:italic; margin-top:10px; color:#ccc;"></div>
        <button id="audio-btn" class="btn-sub" style="margin-top:15px;" onclick="speak(event)">ğŸ”Š ç™ºéŸ³</button>
      </div>
      <p id="hint" style="font-size:12px; color:#888; margin-top:20px;">ã‚¿ãƒƒãƒ—ã§è¡¨ç¤º</p>
    </div>
    <div id="controls" class="hidden">
      <button class="btn-main" onclick="answer(true)" style="background:var(--accent)">è¦šãˆãŸ</button>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
        <button class="btn-main" onclick="answer(false)" style="background:#f39c12">ã‚ã‚„ã—ã„</button>
        <button class="btn-main" onclick="answer(false)" style="background:var(--danger)">å¿˜ã‚ŒãŸ</button>
      </div>
    </div>
  </div>
  <script src="data.js"></script>
  <script src="srs.js"></script>
  <script>
    let current = null;
    function load() {
      current = SRS.getNextWord(current?.id);
      document.getElementById('word').innerText = current.word;
      document.getElementById('meaning').innerText = current.meaning;
      document.getElementById('example').innerText = current.example;
      document.getElementById('detail').classList.add('hidden');
      document.getElementById('controls').classList.add('hidden');
      document.getElementById('hint').classList.remove('hidden');
      if (!window.speechSynthesis) {
        const b = document.getElementById('audio-btn');
        b.disabled = true; b.innerText = "éŸ³å£°éå¯¾å¿œ";
      }
    }
    function toggleCard() {
      document.getElementById('detail').classList.toggle('hidden');
      document.getElementById('controls').classList.toggle('hidden');
      document.getElementById('hint').classList.add('hidden');
    }
    function answer(ok) {
      SRS.recordResult(current.id, ok);
      load();
    }
    function speak(e) {
      e.stopPropagation();
      const u = new SpeechSynthesisUtterance(current.word);
      u.lang = 'en-US';
      speechSynthesis.speak(u);
    }
    load();
  </script>
</body>
</html>